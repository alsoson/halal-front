import{a9 as b,m as c,p as m,q as l,s as C,aa as h,ab as w,b1 as x,t as r,v as a,y as A,A as p,x as n,aH as f,Q as y,bp as S,aG as U,V as D,bA as P,aZ as B,af as N}from"./index.e649f2ab.js";import{Q as u}from"./QCardSection.5707ad4d.js";import{Q as T}from"./QInput.e77058ae.js";import{Q as E}from"./QCardActions.1587f895.js";import{Q as I}from"./QForm.0b2b20cf.js";import{Q}from"./QCard.91a3e6a3.js";import{Q as M}from"./QDialog.37a5f39a.js";import{Q as R}from"./QTable.58b3566f.js";import"./rtl.4b414a6d.js";import"./QChip.7d4f62ce.js";import"./use-fullscreen.31f6d463.js";const $={class:"box"},F={class:"row text-center"},O={class:"text-center q-mx-auto q-my-md q-mt-lg text-secondary",style:{padding:"0"}},z={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},G={class:"q-ma-none"},H=r("div",{class:"text-subtitle2"},"Answer",-1),Z={class:"text-h6"},j={class:"text-subtitle2"},J=r("div",{class:"text-subtitle2"},"Answer",-1),re={__name:"MessagePage",setup(K){const d=b([]),e=b({_id:"",reply:"",idx:0,sell:!1,dialog:!1,submitting:!1}),v=t=>{const o=d.findIndex(g=>g._id===t);e._id=t,e.reply=d[o].reply,e.sell=d[o].sell,e.dialog=!0,e.submitting=!1},V=[{name:"anonymous",required:!0,label:"Anonymous",align:"left",flied:t=>t.row.anonymous,sortable:!0},{name:"title",align:"center",label:"Title",sortable:!0,required:!0},{name:"description",label:"Description",sortable:!0},{name:"reply",label:"Reply",sortable:!0},{name:"edit",label:"Edit",sortable:!0}],k=async()=>{e.submitting=!0,console.log(e.reply);try{await h.patch("/qa/"+e._id,{reply:e.reply,sell:e.sell}),w.fire({icon:"success",title:"\u6210\u529F",text:"\u7DE8\u8F2F\u6210\u529F"}),_(),e.dialog=!1}catch(t){w.fire({icon:"error",title:"\u5931\u6557",text:t.isAxiosError?t.response.data.message:t.message})}e.submitting=!1},_=async()=>{try{const{data:t}=await h.get("/qa/all");d.splice(0,d.length),d.push(...t.result)}catch(t){console.log(t),w.fire({icon:"error",title:"\u5931\u6557",text:t.isAxiosError?t.response.data.message:t.message})}};return _(),(t,o)=>{const g=x("h7"),q=x("q-card-action");return c(),m(C,{id:"connectUs"},{default:l(()=>[r("div",$,[r("div",F,[r("h5",O,[a(A,{name:"mdi-forum",size:"100px",color:"secondary",class:"q-mx-auto"}),p(" "+n(t.$t("messageManagement")),1)])])]),a(R,{grid:"","card-container-class":t.cardContainerClass,rows:d,columns:V,"row-key":"name",filter:t.filter,"hide-header":"",pagination:t.pagination,"onUpdate:pagination":o[4]||(o[4]=s=>t.pagination=s),"rows-per-page-options":t.rowsPerPageOptions},{item:l(s=>[r("div",z,[(c(),m(Q,{key:s.row},{default:l(()=>[a(u,{class:"text-center"},{default:l(()=>[r("h5",G,[r("strong",null,n(s.row.title),1)]),a(g,null,{default:l(()=>[p(n(s.row.anonymous),1)]),_:2},1024)]),_:2},1024),a(f),a(u,{class:"",style:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},{default:l(()=>[p(n(s.row.description),1)]),_:2},1024),a(f,{inset:""}),a(u,{style:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},{default:l(()=>[H,p(" "+n(s.row.reply),1)]),_:2},1024),a(q,null,{default:l(()=>[(c(),m(y,{rounded:"",onClick:i=>v(s.row._id),key:s.row._id,style:{width:"50px",height:"50px"},class:"bg-accent",icon:"mdi-circle-edit-outline"},null,8,["onClick"])),(c(),m(M,{key:s.row._id,modelValue:e.dialog,"onUpdate:modelValue":o[3]||(o[3]=i=>e.dialog=i),persistent:"",style:{width:"100%"}},{default:l(()=>[a(Q,{flat:"",bordered:"",style:{width:"100%"},class:"my-card bg-secondary text-white"},{default:l(()=>[a(I,{modelValue:e,"onUpdate:modelValue":o[2]||(o[2]=i=>S(e)?e.value=i:null),onSubmit:U(k,["prevent"])},{default:l(()=>[a(u,null,{default:l(()=>[r("div",Z,n(s.row.title),1),r("div",j,n(s.row.anonymous),1)]),_:2},1024),a(u,null,{default:l(()=>[p(n(s.row.description),1)]),_:2},1024),a(f,{inset:""}),a(u,null,{default:l(()=>[J,a(T,{modelValue:e.reply,"onUpdate:modelValue":o[0]||(o[0]=i=>e.reply=i),rules:[i=>!!i||"Required"],type:"textarea",color:"white"},null,8,["modelValue","rules"])]),_:1}),a(f,{dark:""}),a(E,null,{default:l(()=>[D(a(y,{round:"",flat:"",icon:"fa-solid fa-xmark"},null,512),[[N]]),a(y,{flat:"",round:"",type:"submit",icon:"fa-solid fa-check"}),e.reply?(c(),m(P,{key:0,"false-value":!1,label:`On the Shelf - ${e.sell}`,"true-value":!0,color:"pink",modelValue:e.sell,"onUpdate:modelValue":o[1]||(o[1]=i=>e.sell=i)},null,8,["label","modelValue"])):B("",!0)]),_:1})]),_:2},1032,["modelValue","onSubmit"])]),_:2},1024)]),_:2},1032,["modelValue"]))]),_:2},1024)]),_:2},1024))])]),_:1},8,["card-container-class","rows","filter","pagination","rows-per-page-options"])]),_:1})}}};export{re as default};
