import{aD as C,r as g,a9 as y,aE as U,m as P,p as S,q as o,s as A,aF as R,v as a,t as c,x as b,aG as v,y as t,Q as f,aH as T,A as W,aI as Z,ab as V}from"./index.a1db0f0f.js";import{Q as u}from"./QInput.a56e06a8.js";import{Q as w}from"./QForm.30557bc3.js";import{e as B,f as x,Q as N,d as $}from"./QTabPanels.96e7eb9c.js";import{Q as E}from"./QCard.8469dab0.js";import"./rtl.4b414a6d.js";import"./use-cache.b0833c75.js";const I={class:"text-h4 text-center q-py-lg"},D={class:"text-h4 text-center q-py-lg"},F=W("Please use maximum 55555characters."),X={__name:"LoginPage",setup(L){const Q=C(),q=R(),p=g("login"),i=g(!1),r=g(!0),d=y({account:"",password:""}),n=y({account:"",password:"",name:"",email:""}),m=y({account:[e=>!!e||"Required",e=>e.length>=4&&e.length<=20||"Wrong",e=>/^[a-zA-Z0-9]+$/.test(e)||"Wrong"],password:[e=>!!e||"Required",e=>e.length>=4&&e.length<=20||"Wrong",e=>/^[a-zA-Z0-9]+$/.test(e)||"Wrong"],email:[e=>!!e||"Required",e=>/^\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/.test(e)||"Wrong"]}),k=()=>{Q.login(d)},z=async()=>{try{await Z.post("/users",n),await V.fire({icon:"success",title:"\u6210\u529F",text:"\u8A3B\u518A\u6210\u529F"}),q.push("/")}catch(e){V.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError&&e.response.data?e.response.data.message:"\u767C\u751F\u932F\u8AA4"}),console.log(e)}};return U({name:"LoginPage"}),(e,l)=>(P(),S(A,{id:"loginPage",class:"text-center flex-center flex",style:{"min-height":"0px",height:"calc( 100vh - 60px )"}},{default:o(()=>[a(E,{class:"q-ma-auto login"},{default:o(()=>[a(B,{modelValue:p.value,"onUpdate:modelValue":l[14]||(l[14]=s=>p.value=s),animated:""},{default:o(()=>[a(x,{name:"login"},{default:o(()=>[c("div",I,b(e.$t("loginV")),1),a(w,{onSubmit:v(k,["prevent"]),class:"q-gutter-md q-px-lg q-px-sm-none"},{default:o(()=>[a(u,{rounded:"",outlined:"",modelValue:d.account,"onUpdate:modelValue":l[1]||(l[1]=s=>d.account=s),label:e.$t("account"),"lazy-rules":"",rules:m.account,dense:i.value,"bottom-slots":"",class:"text-secondary"},{prepend:o(()=>[a(t,{name:"mdi-account",class:"text-secondary"})]),append:o(()=>[a(t,{name:"mdi-close-circle-outline",onClick:l[0]||(l[0]=s=>d.account=""),class:"cursor-pointer text-secondary"})]),_:1},8,["modelValue","label","rules","dense"]),a(u,{rounded:"",outlined:"",modelValue:d.password,"onUpdate:modelValue":l[4]||(l[4]=s=>d.password=s),type:r.value?"password":"text",label:e.$t("password"),"lazy-rules":"",rules:m.password,dense:i.value,"bottom-slots":""},{prepend:o(()=>[a(t,{name:"mdi-lock",class:"text-secondary"})]),append:o(()=>[a(t,{name:r.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:l[2]||(l[2]=s=>r.value=!r.value)},null,8,["name"]),a(t,{name:"mdi-close-circle-outline",onClick:l[3]||(l[3]=s=>d.password=""),class:"cursor-pointer text-secondary"})]),_:1},8,["modelValue","type","label","rules","dense"]),c("div",null,[a(f,{label:e.$t("login"),type:"submit",color:"primary"},null,8,["label"])])]),_:1},8,["onSubmit"])]),_:1}),a(x,{name:"register"},{default:o(()=>[c("div",D,b(e.$t("register")),1),a(w,{onSubmit:v(z,["prevent"]),class:"q-gutter-md q-px-lg q-px-sm-none"},{default:o(()=>[a(u,{rounded:"",outlined:"",modelValue:n.account,"onUpdate:modelValue":l[6]||(l[6]=s=>n.account=s),label:e.$t("account"),"lazy-rules":"",rules:m.account,dense:i.value,"bottom-slots":"",class:"text-secondary"},{prepend:o(()=>[a(t,{name:"mdi-account",class:"text-secondary"})]),append:o(()=>[a(t,{name:"mdi-close-circle-outline",onClick:l[5]||(l[5]=s=>n.account=""),class:"cursor-pointer text-secondary"})]),_:1},8,["modelValue","label","rules","dense"]),a(u,{rounded:"",outlined:"",modelValue:n.password,"onUpdate:modelValue":l[9]||(l[9]=s=>n.password=s),type:r.value?"password":"text",label:e.$t("password"),"lazy-rules":"",rules:m.password,dense:i.value,"bottom-slots":""},{prepend:o(()=>[a(t,{name:"mdi-lock",class:"text-secondary"})]),append:o(()=>[a(t,{name:r.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:l[7]||(l[7]=s=>r.value=!r.value)},null,8,["name"]),a(t,{name:"mdi-close-circle-outline",onClick:l[8]||(l[8]=s=>n.password=""),class:"cursor-pointer text-secondary"})]),_:1},8,["modelValue","type","label","rules","dense"]),a(u,{rounded:"",outlined:"",modelValue:n.name,"onUpdate:modelValue":l[11]||(l[11]=s=>n.name=s),label:e.$t("yourName"),"lazy-rules":"",rules:[s=>s&&s.length>0||"Required"],dense:i.value,"bottom-slots":""},{prepend:o(()=>[a(t,{name:"fa-solid fa-signature",class:"text-secondary"})]),append:o(()=>[a(t,{name:"mdi-close-circle-outline",onClick:l[10]||(l[10]=s=>n.name=""),class:"cursor-pointer text-secondary"})]),_:1},8,["modelValue","label","rules","dense"]),a(u,{rounded:"",outlined:"",modelValue:n.email,"onUpdate:modelValue":l[13]||(l[13]=s=>n.email=s),label:"Email","lazy-rules":"",rules:m.email,dense:i.value,"bottom-slots":"",type:"email"},{error:o(()=>[F]),prepend:o(()=>[a(t,{name:"mdi-email",class:"text-secondary"})]),append:o(()=>[a(t,{name:"mdi-close-circle-outline",onClick:l[12]||(l[12]=s=>n.email=""),class:"cursor-pointer text-secondary"})]),_:1},8,["modelValue","rules","dense"]),c("div",null,[a(f,{label:e.$t("register"),type:"submit",color:"primary"},null,8,["label"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),a(T),a(N,{modelValue:p.value,"onUpdate:modelValue":l[15]||(l[15]=s=>p.value=s),dense:"",class:"bg-secondary",align:"justify","narrow-indicator":""},{default:o(()=>[a($,{name:"login",style:{color:"white"},label:e.$t("login")},null,8,["label"]),a($,{name:"register",style:{color:"white"},label:e.$t("register")},null,8,["label"])]),_:1},8,["modelValue"])]),_:1})]),_:1}))}};export{X as default};
