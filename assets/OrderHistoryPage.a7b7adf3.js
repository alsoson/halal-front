import{r as _,a9 as D,m as r,p as V,q as s,s as B,aa as I,ab as U,b1 as z,t,v as a,y as k,A as u,x as o,Q as c,aY as O,aH as g,ac as m,ad as b,ae as w,V as P,af as $}from"./index.99b6c751.js";import{Q as A}from"./QInput.83aa2860.js";import{Q as C}from"./QTd.2024b20a.js";import{Q as x}from"./QCard.cc5b0bf8.js";import{Q as H}from"./QTable.d455754e.js";import{Q as S}from"./QCardSection.757e8238.js";import{Q as E,d as T,e as F,f as N}from"./QTabPanels.654d8cb7.js";import{Q as K}from"./QCardActions.85122d0d.js";import{Q as L}from"./QDialog.15ef4c62.js";import"./rtl.4b414a6d.js";import"./QChip.7d70d51e.js";import"./use-fullscreen.f859f6dd.js";import"./use-cache.b0833c75.js";var Y="assets/101.0f5c4608.mp4";const G={class:"box"},J={class:"row text-center"},M={class:"text-center q-mx-auto q-my-md q-mt-lg text-secondary",style:{padding:"0"}},R={class:"box"},W={class:"full-width row flex-center text-secondary q-gutter-sm"},X={class:"text-center q-my-md"},Z={class:"flex row justify-between q-mx-md"},ee={class:"text-subtitle2"},te={class:"text-subtitle2"},ae={class:"q-my-sm text-center"},se={class:"q-my-sm text-center"},le={class:"text-center"},oe={class:"flex row justify-between"},ie={class:"text-h6"},re={class:"flex row justify-between"},de={class:"text-subtitle2"},ne={class:"text-subtitle2"},ce={class:"flex row justify-between"},me={class:"q-my-sm"},ue={class:"q-my-sm"},fe={class:"q-my-sm text-center"},_e={class:"q-my-sm text-center"},pe={class:"box q-pb-xl"},he={class:"row"},ve={class:"col col-12 col-sm-6 col-lg-8",style:{height:"calc(50vh - 60px)"}},ye=t("div",{class:"taiwan q-pr-sm",style:{width:"100%",height:"100%",padding:"0"}},null,-1),ge={class:"div"},be=t("div",null,[t("iframe",{src:"https://www.google.com/maps/embed?pb=!1m16!1m12!1m3!1d28921.25444131725!2d121.5548065072683!3d25.028752110073523!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!2m1!1staipei%20101!5e0!3m2!1sen!2stw!4v1661482695124!5m2!1sen!2stw",width:"500",height:"350",style:{border:"0"},loading:"lazy"})],-1),we=t("div",{class:"col col-0 col-sm-6 col-lg-4"},[t("div",{class:"div q-pl-sm",style:{width:"100%",height:"calc(50vh - 60px)"}},[t("video",{autoplay:"",loop:"",src:Y,style:{width:"100%",height:"calc(50vh - 60px)","object-fit":"cover"}})])],-1),Ie={__name:"OrderHistoryPage",setup(xe){const f=_("one"),d=_(""),p=D({dialog:!1}),q=l=>{d.value=l,p.dialog=!0},h=_(!1),Q=D([]),v=_(""),j=[{name:"name",required:!0,label:"ID",align:"left",field:l=>l._id,format:l=>`${l}`,sortable:!0},{name:"orderDay",align:"left",label:"Order Day",field:l=>new Date(l.date).toLocaleString(),sortable:!0},{name:"totalPrice",align:"left",label:"Total Price",field:l=>l.totalPrice,sortable:!0},{name:"btn"}];return(async()=>{try{const{data:l}=await I.get("/orders");Q.push(...l.result.map(i=>(i.totalPrice=i.products.reduce((y,e)=>y+e.product.price*e.quantity,0),i)))}catch(l){console.log(l),U.fire({icon:"question",title:"Please try it again"})}})(),(l,i)=>{const y=z("q-card-action");return r(),V(B,{id:"orderPage"},{default:s(()=>[t("div",G,[t("div",J,[t("h5",M,[a(k,{name:"fa-solid fa-clock-rotate-left",color:"secondary",size:"lg",class:"q-mx-auto"}),u(" "+o(l.$t("orderHistory")),1)])])]),t("div",R,[a(H,{grid:l.$q.screen.lt.md,rows:Q,columns:j,"row-key":"name",filter:v.value,flat:""},{"no-data":s(({})=>[t("div",W,[a(c,{color:"primary",class:"q-my-md",style:{"font-size":"30px"},to:"/cart"},{default:s(()=>[u(o(l.$t("noOrder")),1)]),_:1})])]),"top-right":s(()=>[a(A,{borderless:"",dense:"",debounce:"300",modelValue:v.value,"onUpdate:modelValue":i[0]||(i[0]=e=>v.value=e),placeholder:"Search"},{append:s(()=>[a(k,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-totalPrice":s(e=>[a(C,null,{default:s(()=>[u(" $"+o(e.row.totalPrice),1)]),_:2},1024)]),"body-cell-btn":s(e=>[(r(),V(C,{style:{"text-align":"right"},key:e},{default:s(()=>[a(c,{class:"bg-accent",onClick:n=>q(e)},{default:s(()=>[u(o(l.$t("detail")),1)]),_:2},1032,["onClick"])]),_:2},1024))]),item:s(e=>[t("div",{class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition",style:O(e.selected?"transform: scale(0.95);":"")},[a(x,{class:"text-dark q-ma-sm"},{default:s(()=>[a(g),t("div",null,[t("h6",X,o(e.row._id),1)]),t("div",Z,[t("div",ee,o(new Date(e.row.date).toLocaleString()),1),t("div",te,"$"+o(e.row.totalPrice),1)]),a(g,{class:"q-my-md"}),(r(!0),m(w,null,b(e.row.orderInfo,n=>(r(),m("div",{key:n,class:"q-my-md"},[t("h6",ae,o(n.lastName)+o(n.firstName),1),t("h6",se,o(n.email),1)]))),128)),a(y,{class:"q-mx-auto text-center"},{default:s(()=>[t("div",le,[a(c,{class:"bg-accent q-mb-md",style:{},onClick:n=>q(e)},{default:s(()=>[u(o(l.$t("detail")),1)]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024)],4)]),_:1},8,["grid","rows","filter"]),a(L,{persistent:"",modelValue:p.dialog,"onUpdate:modelValue":i[3]||(i[3]=e=>p.dialog=e)},{default:s(()=>[a(x,{class:"my-card bg-accent"},{default:s(()=>[a(S,{class:"text-dark"},{default:s(()=>[t("div",oe,[t("div",ie,o(d.value.row._id),1)]),t("div",re,[t("div",de,o(new Date(d.value.row.date).toLocaleString()),1),t("div",ne,"$"+o(d.value.row.totalPrice),1)])]),_:1}),a(E,{modelValue:f.value,"onUpdate:modelValue":i[1]||(i[1]=e=>f.value=e),class:"text-teal"},{default:s(()=>[a(T,{label:l.$t("intineraryDetail"),name:"one",class:"text-secondary"},null,8,["label"]),a(T,{label:l.$t("orderDetail"),name:"two"},null,8,["label"])]),_:1},8,["modelValue"]),a(g),a(F,{modelValue:f.value,"onUpdate:modelValue":i[2]||(i[2]=e=>f.value=e),animated:"",class:"bg-accent"},{default:s(()=>[a(N,{name:"one"},{default:s(()=>[(r(!0),m(w,null,b(d.value.row.products,e=>(r(),m("div",{key:e,class:"q-my-md"},[t("div",ce,[t("h6",me,o(e.product.name),1),t("h6",ue,"$"+o(e.product.price),1)]),t("div",null,o(new Date(e.product.startDay).toLocaleDateString())+" ~ "+o(new Date(e.product.endDay).toLocaleDateString()),1)]))),128))]),_:1}),a(N,{name:"two",class:"bg-accent"},{default:s(()=>[(r(!0),m(w,null,b(d.value.row.orderInfo,e=>(r(),m("div",{key:e,class:"q-my-md"},[t("h6",fe,o(e.lastName)+o(e.firstName),1),t("h6",_e,o(e.email),1)]))),128))]),_:1})]),_:1},8,["modelValue"]),a(K,{align:"right",class:"text-teal bg-accent"},{default:s(()=>[P(a(c,{flat:"",label:"OK"},null,512),[[$]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t("div",pe,[t("div",he,[t("div",ve,[a(c,{flat:"",style:{width:"100%",height:"100%",padding:"0"},onClick:i[4]||(i[4]=e=>h.value=!0)},{default:s(()=>[ye]),_:1}),a(L,{modelValue:h.value,"onUpdate:modelValue":i[5]||(i[5]=e=>h.value=e),seamless:"",position:"bottom"},{default:s(()=>[a(x,{class:"dialog-map bg-accent",flat:""},{default:s(()=>[t("div",ge,[P(a(c,{flat:"",round:"",icon:"fa-solid fa-close"},null,512),[[$]])]),a(S,null,{default:s(()=>[be]),_:1})]),_:1})]),_:1},8,["modelValue"])]),we])])]),_:1})}}};export{Ie as default};
