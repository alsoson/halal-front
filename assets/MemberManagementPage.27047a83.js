import{r as p,a9 as $,m as i,ac as h,t as n,v as t,y as Q,A as f,x as c,q as a,ae as _,aa as v,ab as g,Q as m,z as B,V as w,aY as N,bB as z,aH as D,ad as E,p as k,b3 as C,b4 as U,b5 as V,aZ as L,bc as M,af as q}from"./index.a1db0f0f.js";import{Q as T}from"./QTd.7ff3276c.js";import{Q as I}from"./QCardSection.96c3a010.js";import{Q as P}from"./QCardActions.6ad3c481.js";import{Q as A}from"./QCard.8469dab0.js";import{Q as j}from"./QDialog.a6a751c8.js";import{Q as F}from"./QInput.a56e06a8.js";import{Q as H}from"./QTable.9b9b5d86.js";import"./rtl.4b414a6d.js";import"./QChip.a234d430.js";import"./use-fullscreen.9591c12b.js";const Y={class:"text-center text-secondary q-my-md"},Z={class:"q-pa-md"},G={class:"q-ml-sm text-center q-ml-md"},J={class:"flex between",style:{"justify-content":"space-between"}},ne={__name:"MemberManagementPage",setup(K){const d=p("false"),S=[{name:"name",required:!0,label:"Name",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!0},{name:"account",align:"center",label:"Account",field:e=>e.account,sortable:!0},{name:"email",label:"Email",field:e=>e.email,sortable:!0},{name:"id",label:"Id",align:"right",field:e=>e._id,sortable:!0,sort:(e,l)=>parseInt(e,10)-parseInt(l,10)},{name:"delete",label:"",align:"right",sortable:!0,sort:(e,l)=>parseInt(e,10)-parseInt(l,10)}],b=p([]),u=p(""),o=$([]),x=async e=>{try{await v.delete("/users/"+e),await g.fire({icon:"success",title:"\u6210\u529F",text:"\u522A\u9664\u6210\u529F"}),y()}catch(l){g.fire({icon:"error",title:"\u522A\u9664\u5931\u6557",text:l.isAxiosError?l.response.data.message:l.message})}},y=async()=>{try{const{data:e}=await v.get("/users/all");o.splice(0,o.length),o.push(...e.result),console.log(o)}catch(e){console.log(e),g.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError?e.response.data.message:e.message})}};return y(),(e,l)=>(i(),h(_,null,[n("h5",Y,[t(Q,{name:"mdi-account-supervisor-circle",size:"100px",color:"secondary"}),f(" "+c(e.$t("memberManagement")),1)]),n("div",Z,[t(H,{grid:e.$q.screen.lt.sm,rows:o,columns:S,"row-key":"name","title-class":"text-h5 title-center",selected:b.value,"onUpdate:selected":l[3]||(l[3]=s=>b.value=s),filter:u.value,flat:""},{"body-cell-delete":a(s=>[t(T,{style:{"text-align":"right"}},{default:a(()=>[t(m,{rounded:"",style:{width:"50px",height:"50px"},class:"bg-accent",onClick:l[0]||(l[0]=r=>d.value=!0),icon:"mdi-delete"})]),_:1}),t(j,{modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=r=>d.value=r),persistent:""},{default:a(()=>[t(A,null,{default:a(()=>[t(I,{class:"row items-center"},{default:a(()=>[t(B,{icon:"mdi-delete",color:"primary","text-color":"white"}),n("span",G,c(e.$t("Delete"))+" ?",1)]),_:1}),t(P,{align:"right"},{default:a(()=>[w(t(m,{flat:"",color:"primary",icon:"mdi-check-circle",onClick:r=>x(s.row._id)},null,8,["onClick"]),[[q]]),w(t(m,{flat:"",color:"primary",icon:"mdi-close-circle"},null,512),[[q]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),"top-right":a(()=>[t(F,{borderless:"",dense:"",debounce:"300",modelValue:u.value,"onUpdate:modelValue":l[2]||(l[2]=s=>u.value=s),placeholder:"Search"},{append:a(()=>[t(Q,{name:"search"})]),_:1},8,["modelValue"])]),item:a(s=>[n("div",{class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition",style:N(s.selected?"transform: scale(0.95);":"")},[t(A,{class:z(s.selected?"bg-grey-2":"")},{default:a(()=>[t(I,null,{default:a(()=>[n("div",J,[t(m,{rounded:"",onClick:r=>x(s.row._id),icon:"mdi-delete",style:{width:"50px",height:"50px"},class:"bg-accent"},null,8,["onClick"])])]),_:2},1024),t(D),(i(!0),h(_,null,E(s.cols,r=>(i(),k(M,{key:r.name},{default:a(()=>[t(C,{class:"text-center"},{default:a(()=>[t(U,{class:"text-right q-mx-auto"},{default:a(()=>[t(C,null,{default:a(()=>[t(V,null,{default:a(()=>[f(c(r.label),1)]),_:2},1024),r.name!=="image"?(i(),k(V,{key:0,caption:"",class:"text-center q-mx-auto"},{default:a(()=>[f(c(r.value),1)]),_:2},1024)):L("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["class"])],4)]),_:1},8,["grid","rows","selected","filter"])])],64))}};export{ne as default};
