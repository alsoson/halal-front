import{r as u,ab as A,m as i,af as h,s as n,t,x as y,q as a,ah as Q,ac as _,ad as p,Q as c,ae as B,y as N,v as f,V as v,aY as D,bg as E,aC as T,ag as z,p as V,at as w,au as L,av as C,B as k,bx as M,aZ as P,ai as I}from"./index.e0dd589b.js";import{a as j,Q as q}from"./QTd.20148668.js";import{Q as U}from"./QCardSection.66c3425d.js";import{Q as F}from"./QCardActions.3d967329.js";import{Q as S}from"./QCard.5d3d67c9.js";import{Q as Y}from"./QInput.4d10a90f.js";import{Q as Z}from"./QTable.c7d34416.js";import"./QLinearProgress.bb79ceac.js";import"./use-fullscreen.aea342a6.js";const G={class:"text-center"},H={class:"q-pa-md"},J={class:"q-ml-sm text-center q-ml-md"},K={class:"flex between",style:{"justify-content":"space-between"}},re={__name:"MemberManagementPage",setup(O){const d=u("false"),$=[{name:"name",required:!0,label:"Name",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!0},{name:"account",align:"center",label:"Account",field:e=>e.account,sortable:!0},{name:"email",label:"Email",field:e=>e.email,sortable:!0},{name:"id",label:"Id",align:"right",field:e=>e._id,sortable:!0,sort:(e,l)=>parseInt(e,10)-parseInt(l,10)},{name:"delete",label:"",align:"right",sortable:!0,sort:(e,l)=>parseInt(e,10)-parseInt(l,10)}],g=u([]),m=u(""),r=A([]),b=async e=>{try{await _.delete("/users/"+e),await p.fire({icon:"success",title:"\u6210\u529F",text:"\u522A\u9664\u6210\u529F"}),x()}catch(l){p.fire({icon:"error",title:"\u522A\u9664\u5931\u6557",text:l.isAxiosError?l.response.data.message:l.message})}},x=async()=>{try{const{data:e}=await _.get("/users/all");r.splice(0,r.length),r.push(...e.result),console.log(r)}catch(e){console.log(e),p.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError?e.response.data.message:e.message})}};return x(),(e,l)=>(i(),h(Q,null,[n("h5",G,[t(y,{name:"mdi-account-supervisor-circle",size:"100px",color:"secondary"})]),n("div",H,[t(Z,{grid:e.$q.screen.lt.sm,title:e.$t("memberManagement"),rows:r,columns:$,"row-key":"name","title-class":"text-h5 title-center",selection:"multiple",selected:g.value,"onUpdate:selected":l[3]||(l[3]=s=>g.value=s),filter:m.value},{"body-cell-delete":a(s=>[t(j,{style:{"text-align":"right"}},{default:a(()=>[t(c,{rounded:"",style:{width:"50px",height:"50px"},class:"bg-accent",onClick:l[0]||(l[0]=o=>d.value=!0),icon:"mdi-delete"})]),_:1}),t(B,{modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=o=>d.value=o),persistent:""},{default:a(()=>[t(S,null,{default:a(()=>[t(U,{class:"row items-center"},{default:a(()=>[t(N,{icon:"mdi-delete",color:"primary","text-color":"white"}),n("span",J,f(e.$t("Delete"))+" ?",1)]),_:1}),t(F,{align:"right"},{default:a(()=>[v(t(c,{flat:"",color:"primary",icon:"mdi-check-circle",onClick:o=>b(s.row._id)},null,8,["onClick"]),[[I]]),v(t(c,{flat:"",color:"primary",icon:"mdi-close-circle"},null,512),[[I]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),"top-right":a(()=>[t(Y,{borderless:"",dense:"",debounce:"300",modelValue:m.value,"onUpdate:modelValue":l[2]||(l[2]=s=>m.value=s),placeholder:"Search"},{append:a(()=>[t(y,{name:"search"})]),_:1},8,["modelValue"])]),"header-selection":a(s=>[t(q,{modelValue:s.selected,"onUpdate:modelValue":o=>s.selected=o},null,8,["modelValue","onUpdate:modelValue"])]),"body-selection":a(s=>[t(q,{modelValue:s.selected,"onUpdate:modelValue":o=>s.selected=o},null,8,["modelValue","onUpdate:modelValue"])]),item:a(s=>[n("div",{class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition",style:D(s.selected?"transform: scale(0.95);":"")},[t(S,{class:E(s.selected?"bg-grey-2":"")},{default:a(()=>[t(U,null,{default:a(()=>[n("div",K,[t(c,{rounded:"",onClick:o=>b(s.row._id),icon:"mdi-delete",style:{width:"50px",height:"50px"},class:"bg-accent"},null,8,["onClick"])])]),_:2},1024),t(T),(i(!0),h(Q,null,z(s.cols,o=>(i(),V(P,{key:o.name},{default:a(()=>[t(w,{class:"text-center"},{default:a(()=>[t(L,{class:"text-right q-mx-auto"},{default:a(()=>[t(w,null,{default:a(()=>[t(C,null,{default:a(()=>[k(f(o.label),1)]),_:2},1024),o.name!=="image"?(i(),V(C,{key:0,caption:"",class:"text-center q-mx-auto"},{default:a(()=>[k(f(o.value),1)]),_:2},1024)):M("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1032,["class"])],4)]),_:1},8,["grid","title","rows","selected","filter"])])],64))}};export{re as default};
