import{a9 as _,m as c,p as m,q as o,s as S,aa as Q,ab as y,b1 as x,t as n,x as r,v as l,y as T,A as f,aH as p,Q as b,bj as P,aG as D,V,bn as $,af as v}from"./index.46507802.js";import{Q as C}from"./QInput.046d9fdd.js";import{Q as u}from"./QCardSection.d3efa465.js";import{Q as B}from"./QCardActions.3029112f.js";import{Q as E}from"./QForm.84f52abf.js";import{Q as k}from"./QCard.66194996.js";import{Q as I}from"./QDialog.0ffcdbf9.js";import{Q as N}from"./QTable.fea640f0.js";import"./rtl.4b414a6d.js";import"./QChip.b41e7f49.js";import"./use-fullscreen.6c99fff4.js";const z={class:"text-center text-secondary",style:{"font-family":"'ChenYuluoyan-Thin'","font-size":"10vmin"}},F={style:{width:"100%"},class:"bg-accent"},M={class:"text-center q-px-lg q-py-lg",style:{"font-family":"'ChenYuluoyan-Thin'","font-size":"3.5vmin","font-weight":"300"}},O={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},R={class:"q-ma-none"},Y=n("div",{class:"text-subtitle2"},"Answer",-1),j={class:"text-h6"},G={class:"text-subtitle2"},H=n("div",{class:"text-subtitle2"},"Answer",-1),ne={__name:"MessagePage",setup(J){const d=_([]),t=_({_id:"",reply:"",idx:0,sell:!1,dialog:!1,submitting:!1}),q=e=>{const a=d.findIndex(g=>g._id===e);t._id=e,t.reply=d[a].reply,t.sell=d[a].sell,t.dialog=!0,t.submitting=!1},U=[{name:"anonymous",required:!0,label:"Anonymous",align:"left",sortable:!0},{name:"title",align:"center",label:"Title",sortable:!0,required:!0},{name:"description",label:"Description",sortable:!0},{name:"reply",label:"Reply",sortable:!0},{name:"edit",label:"Edit",sortable:!0}],h=async()=>{t.submitting=!0,console.log(t.reply);try{await Q.patch("/qa/"+t._id,{reply:t.reply,sell:t.sell}),y.fire({icon:"success",title:"\u6210\u529F",text:"\u7DE8\u8F2F\u6210\u529F"}),w(),t.dialog=!1}catch(e){y.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError?e.response.data.message:e.message})}t.submitting=!1},w=async()=>{try{const{data:e}=await Q.get("/qa/all");d.splice(0,d.length),d.push(...e.result)}catch(e){console.log(e),y.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError?e.response.data.message:e.message})}};return w(),(e,a)=>{const g=x("h7"),A=x("q-card-action");return c(),m(S,{id:"connectUs"},{default:o(()=>[n("h2",z,r(e.$t("connectUsTitle")),1),n("div",F,[n("h6",M,r(e.$t("connectUsP")),1)]),l(N,{grid:"","card-container-class":e.cardContainerClass,rows:d,columns:U,"row-key":"name",filter:e.filter,"hide-header":"",pagination:e.pagination,"onUpdate:pagination":a[6]||(a[6]=s=>e.pagination=s),"rows-per-page-options":e.rowsPerPageOptions},{"top-right":o(()=>[l(C,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":a[0]||(a[0]=s=>e.filter=s),placeholder:"Search"},{append:o(()=>[l(T,{name:"search"})]),_:1},8,["modelValue"])]),item:o(s=>[n("div",O,[(c(),m(k,{key:s.row},{default:o(()=>[l(u,{class:"text-center"},{default:o(()=>[n("h5",R,[n("strong",null,r(s.row.title),1)]),l(g,null,{default:o(()=>[f(r(s.row.anonymous),1)]),_:2},1024)]),_:2},1024),l(p),l(u,{class:""},{default:o(()=>[f(r(s.row.description),1)]),_:2},1024),l(p,{inset:""}),l(u,null,{default:o(()=>[Y,f(" "+r(s.row.reply),1)]),_:2},1024),l(A,null,{default:o(()=>[(c(),m(b,{rounded:"",onClick:i=>q(s.row._id),key:s.row._id,style:{width:"50px",height:"50px"},class:"bg-accent",icon:"mdi-circle-edit-outline"},null,8,["onClick"])),(c(),m(I,{key:s.row._id,modelValue:t.dialog,"onUpdate:modelValue":a[5]||(a[5]=i=>t.dialog=i),persistent:"",style:{width:"100%"}},{default:o(()=>[l(k,{flat:"",bordered:"",style:{width:"100%"},class:"my-card bg-secondary text-white"},{default:o(()=>[l(E,{modelValue:t,"onUpdate:modelValue":a[4]||(a[4]=i=>P(t)?t.value=i:null),onSubmit:D(h,["prevent"])},{default:o(()=>[l(u,null,{default:o(()=>[n("div",j,r(s.row.title),1),n("div",G,r(s.row.anonymous),1)]),_:2},1024),l(u,null,{default:o(()=>[f(r(s.row.description),1)]),_:2},1024),l(p,{inset:""}),l(u,null,{default:o(()=>[H,l(C,{modelValue:t.reply,"onUpdate:modelValue":a[1]||(a[1]=i=>t.reply=i),type:"textarea",color:"white"},null,8,["modelValue"])]),_:1}),l(p,{dark:""}),l(B,null,{default:o(()=>[V(l(b,{round:"",flat:"",icon:"fa-solid fa-xmark"},null,512),[[v]]),V(l(b,{flat:"",round:"",type:"submit",icon:"fa-solid fa-check",onClick:a[2]||(a[2]=i=>h())},null,512),[[v]]),l($,{"false-value":!1,label:`On the Shelf - ${t.sell}`,"true-value":!0,color:"pink",modelValue:t.sell,"onUpdate:modelValue":a[3]||(a[3]=i=>t.sell=i)},null,8,["label","modelValue"])]),_:1})]),_:2},1032,["modelValue","onSubmit"])]),_:2},1024)]),_:2},1032,["modelValue"]))]),_:2},1024)]),_:2},1024))])]),_:1},8,["card-container-class","rows","filter","pagination","rows-per-page-options"])]),_:1})}}};export{ne as default};
