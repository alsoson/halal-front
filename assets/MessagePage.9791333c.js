import{a9 as x,m as c,p,q as o,s as S,aa as h,ab as y,b1 as Q,t as i,v as t,y as U,A as m,x as r,aH as f,Q as b,bp as D,aG as P,V as v,bA as B,af as V}from"./index.a1db0f0f.js";import{Q as u}from"./QCardSection.96c3a010.js";import{Q as T}from"./QInput.a56e06a8.js";import{Q as $}from"./QCardActions.6ad3c481.js";import{Q as E}from"./QForm.30557bc3.js";import{Q as k}from"./QCard.8469dab0.js";import{Q as I}from"./QDialog.a6a751c8.js";import{Q as M}from"./QTable.9b9b5d86.js";import"./rtl.4b414a6d.js";import"./QChip.a234d430.js";import"./use-fullscreen.9591c12b.js";const N={class:"box"},F={class:"row text-center"},O={class:"text-center q-mx-auto q-my-md q-mt-lg text-secondary",style:{padding:"0"}},R={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},z={class:"q-ma-none"},G=i("div",{class:"text-subtitle2"},"Answer",-1),H={class:"text-h6"},j={class:"text-subtitle2"},J=i("div",{class:"text-subtitle2"},"Answer",-1),ie={__name:"MessagePage",setup(K){const d=x([]),e=x({_id:"",reply:"",idx:0,sell:!1,dialog:!1,submitting:!1}),q=a=>{const l=d.findIndex(g=>g._id===a);e._id=a,e.reply=d[l].reply,e.sell=d[l].sell,e.dialog=!0,e.submitting=!1},C=[{name:"anonymous",required:!0,label:"Anonymous",align:"left",sortable:!0},{name:"title",align:"center",label:"Title",sortable:!0,required:!0},{name:"description",label:"Description",sortable:!0},{name:"reply",label:"Reply",sortable:!0},{name:"edit",label:"Edit",sortable:!0}],w=async()=>{e.submitting=!0,console.log(e.reply);try{await h.patch("/qa/"+e._id,{reply:e.reply,sell:e.sell}),y.fire({icon:"success",title:"\u6210\u529F",text:"\u7DE8\u8F2F\u6210\u529F"}),_(),e.dialog=!1}catch(a){y.fire({icon:"error",title:"\u5931\u6557",text:a.isAxiosError?a.response.data.message:a.message})}e.submitting=!1},_=async()=>{try{const{data:a}=await h.get("/qa/all");d.splice(0,d.length),d.push(...a.result)}catch(a){console.log(a),y.fire({icon:"error",title:"\u5931\u6557",text:a.isAxiosError?a.response.data.message:a.message})}};return _(),(a,l)=>{const g=Q("h7"),A=Q("q-card-action");return c(),p(S,{id:"connectUs"},{default:o(()=>[i("div",N,[i("div",F,[i("h5",O,[t(U,{name:"mdi-forum",size:"100px",color:"secondary",class:"q-mx-auto"}),m(" "+r(a.$t("messageManagement")),1)])])]),t(M,{grid:"","card-container-class":a.cardContainerClass,rows:d,columns:C,"row-key":"name",filter:a.filter,"hide-header":"",pagination:a.pagination,"onUpdate:pagination":l[5]||(l[5]=s=>a.pagination=s),"rows-per-page-options":a.rowsPerPageOptions},{item:o(s=>[i("div",R,[(c(),p(k,{key:s.row},{default:o(()=>[t(u,{class:"text-center"},{default:o(()=>[i("h5",z,[i("strong",null,r(s.row.title),1)]),t(g,null,{default:o(()=>[m(r(s.row.anonymous),1)]),_:2},1024)]),_:2},1024),t(f),t(u,{class:""},{default:o(()=>[m(r(s.row.description),1)]),_:2},1024),t(f,{inset:""}),t(u,null,{default:o(()=>[G,m(" "+r(s.row.reply),1)]),_:2},1024),t(A,null,{default:o(()=>[(c(),p(b,{rounded:"",onClick:n=>q(s.row._id),key:s.row._id,style:{width:"50px",height:"50px"},class:"bg-accent",icon:"mdi-circle-edit-outline"},null,8,["onClick"])),(c(),p(I,{key:s.row._id,modelValue:e.dialog,"onUpdate:modelValue":l[4]||(l[4]=n=>e.dialog=n),persistent:"",style:{width:"100%"}},{default:o(()=>[t(k,{flat:"",bordered:"",style:{width:"100%"},class:"my-card bg-secondary text-white"},{default:o(()=>[t(E,{modelValue:e,"onUpdate:modelValue":l[3]||(l[3]=n=>D(e)?e.value=n:null),onSubmit:P(w,["prevent"])},{default:o(()=>[t(u,null,{default:o(()=>[i("div",H,r(s.row.title),1),i("div",j,r(s.row.anonymous),1)]),_:2},1024),t(u,null,{default:o(()=>[m(r(s.row.description),1)]),_:2},1024),t(f,{inset:""}),t(u,null,{default:o(()=>[J,t(T,{modelValue:e.reply,"onUpdate:modelValue":l[0]||(l[0]=n=>e.reply=n),type:"textarea",color:"white"},null,8,["modelValue"])]),_:1}),t(f,{dark:""}),t($,null,{default:o(()=>[v(t(b,{round:"",flat:"",icon:"fa-solid fa-xmark"},null,512),[[V]]),v(t(b,{flat:"",round:"",type:"submit",icon:"fa-solid fa-check",onClick:l[1]||(l[1]=n=>w())},null,512),[[V]]),t(B,{"false-value":!1,label:`On the Shelf - ${e.sell}`,"true-value":!0,color:"pink",modelValue:e.sell,"onUpdate:modelValue":l[2]||(l[2]=n=>e.sell=n)},null,8,["label","modelValue"])]),_:1})]),_:2},1032,["modelValue","onSubmit"])]),_:2},1024)]),_:2},1032,["modelValue"]))]),_:2},1024)]),_:2},1024))])]),_:1},8,["card-container-class","rows","filter","pagination","rows-per-page-options"])]),_:1})}}};export{ie as default};
