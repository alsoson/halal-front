import{r as C,aa as D,aW as g,m as n,p as d,q as o,s as B,ab as P,ac as I,t as s,v as e,y as w,x as r,C as b,aB as m,ae as v,af as y,ag as Q,Q as _,ad as N,aA as U,W as x,ah as k}from"./index.93ce210a.js";import{Q as V}from"./QInput.89c23865.js";import{Q as u}from"./QCardSection.5f4ca36c.js";import{Q as $}from"./QToggle.4bf7ff1d.js";import{Q as A}from"./QCardActions.4fb028ee.js";import{Q as F}from"./QForm.e159fab3.js";import{Q as q}from"./QCard.10d6c296.js";import{Q as M}from"./QTable.e07e1c7c.js";import"./QLinearProgress.66f2ed8c.js";import"./use-fullscreen.91507e7e.js";const O={class:"text-center"},T={class:"q-pa-md"},W={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3"},j={class:"q-ma-none order-id"},z={class:"pack-product"},E={class:"flex justify-between"},L={class:"text-subtitle2"},G={class:"text-subtitle2 text-secondary"},H={class:"text-subtitle2"},J={class:"text-subtitle2 q-mx-auto text-center q-pt-md q-pb-none"},K={class:"text-subtitle2 text-center"},R={class:"text-subtitle2 text-center"},X={class:"text-subtitle2 text-center"},Y={class:"text-h6"},Z={class:"text-subtitle2"},ee=s("div",{class:"text-subtitle2"},"Answer",-1),pe={__name:"OrderManagementPage",setup(te){const p=C(""),h=D([]),S=[{name:"_id",required:!0,label:"Id",align:"left",sortable:!0}];return(async()=>{try{const{data:a}=await P.get("/orders/all");h.push(...a.result.map(l=>(l.totalPrice=l.products.reduce((f,c)=>f+c.product.price*c.quantity,0),l)))}catch(a){console.log(a),I.fire({icon:"error",title:"\u5931\u6557",text:"\u7121\u6CD5\u53D6\u5F97\u8A02\u55AE"})}})(),(a,l)=>{const f=g("h7"),c=g("q-card-action");return n(),d(B,{id:"orderManagement"},{default:o(()=>[s("h5",O,[e(w,{name:"mdi-clipboard-file",size:"100px",color:"secondary"})]),s("div",T,[e(M,{grid:"",rows:h,columns:S,"row-key":"name",filter:p.value,"hide-header":"",pagination:a.pagination,"onUpdate:pagination":l[5]||(l[5]=i=>a.pagination=i),"rows-per-page-options":a.rowsPerPageOptions},{"top-right":o(()=>[e(V,{borderless:"",dense:"",debounce:"300",modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=i=>p.value=i),placeholder:"Search"},{append:o(()=>[e(w,{name:"search"})]),_:1},8,["modelValue"])]),item:o(i=>[s("div",W,[(n(),d(q,{key:i.row,class:"text-dark"},{default:o(()=>[e(u,{class:"text-center"},{default:o(()=>[s("div",j,[s("strong",null,r(i.row._id),1)]),e(f,null,{default:o(()=>[b(r(i.row.user.account),1)]),_:2},1024)]),_:2},1024),e(m),(n(!0),v(Q,null,y(i.row.products,t=>(n(),d(u,{key:t._id,class:""},{default:o(()=>[s("div",z,[s("div",E,[s("div",L,r(t.product.name)+" - "+r(t.quantity)+r(a.$t("pack")),1),s("div",G," $"+r(t.product.price),1)]),s("div",H,r(new Date(t.product.startDay).toDateString())+" ~ "+r(new Date(t.product.endDay).toDateString()),1)])]),_:2},1024))),128)),e(m,{inset:""}),s("div",J,r(a.$t("orderInfo")),1),(n(!0),v(Q,null,y(i.row.orderInfo,t=>(n(),d(u,{key:t._id},{default:o(()=>[s("div",K,r(t.lastName)+r(t.firstName),1),s("div",R,r(t.phone),1),s("div",X,r(t.email),1)]),_:2},1024))),128)),e(c,null,{default:o(()=>[(n(),d(_,{rounded:"",key:i.row._id,style:{width:"50px",height:"50px"},class:"bg-accent",icon:"mdi-circle-edit-outline"})),(n(),d(N,{key:i.row._id,persistent:"",style:{width:"100%"}},{default:o(()=>[e(q,{flat:"",bordered:"",style:{width:"100%"},class:"my-card bg-secondary text-white"},{default:o(()=>[e(F,{modelValue:a.form,"onUpdate:modelValue":l[4]||(l[4]=t=>a.form=t),onSubmit:U(a.submitForm,["prevent"])},{default:o(()=>[e(u,null,{default:o(()=>[s("div",Y,r(i.row),1),s("div",Z,r(i.row),1)]),_:2},1024),e(u,null,{default:o(()=>[b(r(i.row),1)]),_:2},1024),e(m,{inset:""}),e(u,null,{default:o(()=>[ee,e(V,{modelValue:a.form.reply,"onUpdate:modelValue":l[1]||(l[1]=t=>a.form.reply=t),type:"textarea",color:"white"},null,8,["modelValue"])]),_:1}),e(m,{dark:""}),e(A,null,{default:o(()=>[x(e(_,{round:"",flat:"",icon:"fa-solid fa-xmark"},null,512),[[k]]),x(e(_,{flat:"",round:"",type:"submit",icon:"fa-solid fa-check",onClick:l[2]||(l[2]=t=>a.submitForm())},null,512),[[k]]),e($,{"false-value":!1,label:`On the Shelf - ${a.form.sell}`,"true-value":!0,color:"pink",modelValue:a.form.sell,"onUpdate:modelValue":l[3]||(l[3]=t=>a.form.sell=t)},null,8,["label","modelValue"])]),_:1})]),_:2},1032,["modelValue","onSubmit"])]),_:2},1024)]),_:2},1024))]),_:2},1024)]),_:2},1024))])]),_:1},8,["rows","filter","pagination","rows-per-page-options"])])]),_:1})}}};export{pe as default};
