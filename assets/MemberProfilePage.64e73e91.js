import{r as $,a9 as p,m,p as u,q as r,s as k,aa as g,ab as x,t,v as s,y as q,A as Q,x as U,ac as w,z as E,Q as f,aG as z}from"./index.905caf83.js";import{Q as d}from"./QInput.19e4aff6.js";import{Q as y}from"./QCard.8565ee8b.js";import{Q as C}from"./QFile.1e85a15e.js";import{Q as P}from"./QForm.2e022cf8.js";import"./QChip.ccbb952e.js";const S={class:"box"},B={class:"row text-center"},F={class:"text-center q-mx-auto q-my-md q-mt-lg text-secondary",style:{padding:"0"}},N={class:"row q-mt-none q-mt-lg-xl"},A={class:"row memberCard q-pa-lg"},R={class:"col col-12 text-center"},D=["src"],I={class:"col col-12 col-md-6 q-pa-xs"},J={class:"col col-12 col-md-6 q-pa-xs"},M={class:"col col-12 q-pa-xs"},O={class:"col col-12 col-md-6 q-pa-xs"},W={class:"col col-12 col-md-6 q-pa-xs"},j={class:"col-12"},G={class:"q-my-xxl q-mx-auto text-center q-pa-md"},H={class:"row memberCard q-pa-lg"},T={class:"col col-12 col-md-6 q-pa-xs"},K={class:"col col-12 col-md-6 q-pa-xs"},L={class:"col col-12 q-pa-xs"},X={class:"col col-12 col-md-6 q-pa-xs"},Y={class:"col col-12 col-md-6 q-pa-xs"},Z={class:"col col-12 q-pa-xs"},ee={class:"col-12"},le={class:"q-my-xxl q-mx-auto text-center q-pa-md"},me={__name:"MemberProfilePage",setup(oe){const i=$(!0),v=()=>{i.value?i.value=!1:i.value=!0},c=p({name:[e=>!!e||"Required"],smartphone:[e=>!!e||"Required",e=>/^[0-9]+$/.test(e)||"Wrong"],telephone:[e=>!!e||"Required",e=>/^[0-9]+$/.test(e)||"Wrong"]}),a=p({_id:"",image:"",account:"",email:"",name:"",smartphone:"",telephone:""}),n=p({name:"",image:"",smartphone:"",telephone:""}),h=()=>{i.value=!1,n.name=a.name,n.smartphone=a.smartphone,n.telephone=a.telephone,n.image=a.image},b=async()=>{try{const{data:e}=await g.get("/users");console.log(e.result.image),a._id=e.result._id,a.account=e.result.account,a.email=e.result.email,a.name=e.result.name,a.image=e.result.image,a.smartphone=e.result.smartphone,a.telephone=e.result.telephone}catch(e){x.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError?e.response.data.message:e.message})}},V=async()=>{try{const e=new FormData;for(const o in n)e.append(o,n[o]);const l={};e.forEach((o,_)=>{l[_]=JSON.stringify(o)}),console.log(JSON.stringify(l)),await g.patch("/users",e),b(),x.fire({icon:"success",title:"Edit Success"}),i.value=!0}catch{x.fire({icon:"question",title:"Please try it again"})}};return b(),(e,l)=>(m(),u(k,{id:"memberProfile",class:"flex flex-center"},{default:r(()=>[t("div",null,[t("div",S,[t("div",B,[t("h5",F,[s(q,{name:"mdi-account-box-multiple",color:"secondary",size:"lg",class:"q-mx-auto"}),Q(" "+U(e.$t("memberProfile")),1)])])]),t("div",N,[i.value?(m(),u(y,{key:0,flat:"",bordered:"",class:"q-mx-auto bg-accent"},{default:r(()=>[t("div",A,[t("div",R,[s(E,{color:"secondary",class:"text-white"},{default:r(()=>[a.image==0?(m(),u(q,{key:0,name:"fa-solid fa-address-book",size:"xl"})):(m(),w("img",{key:1,src:a.image,alt:""},null,8,D))]),_:1})]),t("div",I,[s(d,{label:e.$t("account"),readonly:"",modelValue:a.account,"onUpdate:modelValue":l[0]||(l[0]=o=>a.account=o)},null,8,["label","modelValue"])]),t("div",J,[s(d,{label:"Email",readonly:"",modelValue:a.email,"onUpdate:modelValue":l[1]||(l[1]=o=>a.email=o)},null,8,["modelValue"])]),t("div",M,[s(d,{label:e.$t("name"),readonly:"",modelValue:a.name,"onUpdate:modelValue":l[2]||(l[2]=o=>a.name=o)},null,8,["label","modelValue"])]),t("div",O,[s(d,{label:e.$t("smartphone"),readonly:"",modelValue:a.smartphone,"onUpdate:modelValue":l[3]||(l[3]=o=>a.smartphone=o)},null,8,["label","modelValue"])]),t("div",W,[s(d,{label:e.$t("telephone"),readonly:"",modelValue:a.telephone,"onUpdate:modelValue":l[4]||(l[4]=o=>a.telephone=o)},null,8,["label","modelValue"])]),t("div",j,[t("div",G,[s(f,{round:"",icon:"fa-solid fa-pen-nib",class:"q-py-sm q-px-xxl text-subtitle2",unelevated:"",color:"secondary",onClick:l[5]||(l[5]=o=>h())})])])])]),_:1})):(m(),u(y,{key:1,flat:"",bordered:"",class:"q-mx-auto bg-accent"},{default:r(()=>[s(P,{onSubmit:l[13]||(l[13]=z(o=>V(),["prevent"]))},{default:r(()=>[t("div",H,[t("div",T,[s(d,{label:e.$t("account"),readonly:"",modelValue:a.account,"onUpdate:modelValue":l[6]||(l[6]=o=>a.account=o)},null,8,["label","modelValue"])]),t("div",K,[s(d,{label:"Email",readonly:"",modelValue:a.email,"onUpdate:modelValue":l[7]||(l[7]=o=>a.email=o)},null,8,["modelValue"])]),t("div",L,[s(d,{label:e.$t("name"),modelValue:n.name,"onUpdate:modelValue":l[8]||(l[8]=o=>n.name=o),"lazy-rules":"",rules:c.name},null,8,["label","modelValue","rules"])]),t("div",X,[s(d,{label:e.$t("smartphone"),modelValue:n.smartphone,"onUpdate:modelValue":l[9]||(l[9]=o=>n.smartphone=o),"lazy-rules":"",rules:c.smartphone},null,8,["label","modelValue","rules"])]),t("div",Y,[s(d,{label:e.$t("telephone"),modelValue:n.telephone,"onUpdate:modelValue":l[10]||(l[10]=o=>n.telephone=o),"lazy-rules":"",rules:c.telephone},null,8,["label","modelValue","rules"])]),t("div",Z,[s(C,{type:"file",accept:"image/*",hint:e.$t("imageHint"),label:e.$t("imageUpload"),modelValue:n.image,"onUpdate:modelValue":l[11]||(l[11]=o=>n.image=o)},null,8,["hint","label","modelValue"])]),t("div",ee,[t("div",le,[s(f,{round:"",icon:"fa-solid fa-xmark",class:"q-py-sm q-px-xxl text-subtitle2 q-mx-xs",unelevated:"",color:"secondary",onClick:l[12]||(l[12]=o=>v())}),s(f,{round:"",icon:"fa-solid fa-check",class:"q-py-sm q-px-xxl q-mx-xs text-subtitle2",unelevated:"",color:"secondary",type:"submit"})])])])]),_:1})]),_:1}))])])]),_:1}))}};export{me as default};
