import{C as m,aw as y,a as q,r as _,ax as c,d as u,h as f,O as I,j as S,e as D}from"./index.872c6a74.js";const b={threshold:0,root:null,rootMargin:"0px"};function g(e,n,r){let t,i,o;typeof r=="function"?(t=r,i=b,o=n.cfg===void 0):(t=r.handler,i=Object.assign({},b,r.cfg),o=n.cfg===void 0||y(n.cfg,i)===!1),n.handler!==t&&(n.handler=t),o===!0&&(n.cfg=i,n.observer!==void 0&&n.observer.unobserve(e),n.observer=new IntersectionObserver(([s])=>{if(typeof n.handler=="function"){if(s.rootBounds===null&&document.body.contains(e)===!0){n.observer.unobserve(e),n.observer.observe(e);return}(n.handler(s,n.observer)===!1||n.once===!0&&s.isIntersecting===!0)&&h(e)}},i),n.observer.observe(e))}function h(e){const n=e.__qvisible;n!==void 0&&(n.observer!==void 0&&n.observer.unobserve(e),delete e.__qvisible)}var P=m({name:"intersection",mounted(e,{modifiers:n,value:r}){const t={once:n.once===!0};g(e,t,r),e.__qvisible=t},updated(e,n){const r=e.__qvisible;r!==void 0&&g(e,r,n.value)},beforeUnmount:h}),C=q({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(e,{slots:n,emit:r}){const t=_(c.value===!0?e.ssrPrerender:!1),i=u(()=>e.root!==void 0||e.margin!==void 0||e.threshold!==void 0?{handler:v,cfg:{root:e.root,rootMargin:e.margin,threshold:e.threshold}}:v),o=u(()=>e.disable!==!0&&(c.value!==!0||e.once!==!0||e.ssrPrerender!==!0)),s=u(()=>[[P,i.value,void 0,{once:e.once}]]),d=u(()=>`--q-transition-duration: ${e.transitionDuration}ms`);function v(a){t.value!==a.isIntersecting&&(t.value=a.isIntersecting,e.onVisibility!==void 0&&r("visibility",t.value))}function l(){return t.value===!0?[f("div",{key:"content",style:d.value},D(n.default))]:void 0}return()=>{const a=e.transition?[f(I,{name:"q-transition--"+e.transition},l)]:l();return S(e.tag,{class:"q-intersection"},a,"main",o.value,()=>s.value)}}});export{C as Q};
