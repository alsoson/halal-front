import{a9 as I,r as V,m,p as c,q as d,s as F,aa as g,ab as y,b1 as z,t as s,v as a,Q as u,b8 as L,C as M,b9 as j,ba as G,A as P,x as v,V as p,aG as H,bn as $,y as O,z as h,aY as Y,bo as Z,bp as J,aH as K,ac as R,ad as W,bh as X,b3 as T,b4 as ee,b5 as le,aZ as oe,ae,af as f}from"./index.46507802.js";import{Q as r}from"./QInput.046d9fdd.js";import{Q as te}from"./QFile.92f48a55.js";import{Q as b}from"./QCard.66194996.js";import{Q as de}from"./QForm.84f52abf.js";import{Q as D}from"./QDialog.0ffcdbf9.js";import{Q as A}from"./QTd.2b708599.js";import{Q as k}from"./QCardSection.d3efa465.js";import{Q as N}from"./QCardActions.3029112f.js";import{Q as se}from"./QTable.fea640f0.js";import"./QChip.b41e7f49.js";import"./rtl.4b414a6d.js";import"./use-fullscreen.6c99fff4.js";const ne={class:"row bg-primary",style:{height:"100px"}},ie={class:"row"},re={flat:"",class:"col",col:"10"},ue={class:"col",col:"10"},me={class:"row"},ce={class:"col",col:"6"},ye={class:"col",col:"6"},pe={class:"row"},fe={class:"col",col:"6"},be={class:"col",col:"6"},we={class:"col",col:"6"},Ve={class:"row"},ge={class:"col col-6"},ve={class:"col col-6"},he={class:"col col-6"},xe={class:"col col-6"},_e={class:"col col-6"},Qe={class:"col col-6"},qe={class:"col col-6"},Ue={class:"col col-6"},$e={class:"col col-6"},De={class:"col col-6"},ke={class:"row"},Ce={class:"col",col:"12"},Se={class:"row"},Ie={class:"col",col:"6"},Pe={class:"q-pa-md"},Te=["src"],Ae={class:"q-ml-sm text-center q-ml-md"},Ne=["src"],Be={class:"flex",style:{"justify-content":"space-around"}},Ee={class:"q-ml-sm text-center q-ml-md"},Xe={__name:"ItineraryManagementPage",setup(Fe){const n=I([]),x=V(""),C=V([]),_=V(!1),Q=V(!1),B=[{name:"image",label:"image"},{name:"name",required:!0,label:"Name",field:t=>t.name,sortable:!0},{name:"price",field:t=>t.price,label:"Price",sortable:!0},{name:"people",field:t=>t.people,label:"People",sortable:!0},{name:"startDay",field:t=>t.startDay,label:"Start Day",sortable:!0},{name:"endDay",label:"End Day",field:t=>t.endDay,sortable:!0},{name:"edit",label:"Edit"}],e=I({_id:"",name:"",price:0,category:"",sell:!1,image:null,description:"",idx:-1,dialog:!1,valid:!1,submitting:!1,perple:"",startDay:"",endDay:"",dayoneone:"",dayonetwo:"",dayonethree:"",dayonefour:"",dayonefive:"",daytwoone:"",daytwotwo:"",daytwothree:"",daytwofour:"",daytwofive:""}),q=t=>{e._id=t;const l=t===""?-1:n.findIndex(w=>w._id===t);l>-1?(e.name=n[l].name,e.price=n[l].price,e.sell=n[l].sell,e.description=n[l].description,e.people=n[l].people,e.startDay=n[l].startDay,e.endDay=n[l].endDay,e.dayoneone=n[l].dayoneone,e.dayonetwo=n[l].dayonetwo,e.dayonethree=n[l].dayonethree,e.dayonefour=n[l].dayonefour,e.dayonefive=n[l].dayonefive,e.daytwoone=n[l].daytwoone,e.daytwotwo=n[l].daytwotwo,e.daytwothree=n[l].daytwothree,e.daytwofour=n[l].daytwofour,e.daytwofive=n[l].daytwofive):(e.name="",e.price=0,e.sell=!1,e.description="",e.people="",e.startDay="",e.endDay="",e.dayoneone="",e.dayonetwo="",e.dayonethree="",e.dayonefour="",e.dayonefive="",e.daytwoone="",e.daytwotwo="",e.daytwothree="",e.daytwofour="",e.daytwofive=""),e.image=n[l].image,e.idx=l,e.dialog=!0,e.valid=!1,e.submitting=!1},E=async()=>{e.submitting=!0;const t=new FormData;for(const l in e)["_id","idx","dialog","valid","submitting"].includes(l)||(t.append(l,e[l]),console.log(e[l]));console.log(t);try{if(e._id.length===0){const{data:l}=await g.post("/products",t);n.push(l.result),y.fire({icon:"success",title:"\u6210\u529F",text:"\u65B0\u589E\u6210\u529F"})}else{const{data:l}=await g.patch("/products/"+e._id,t);console.log("1234"),n[e.idx]=l.result,y.fire({icon:"success",title:"\u6210\u529F",text:"\u7DE8\u8F2F\u6210\u529F"}),U()}e.dialog=!1}catch(l){y.fire({icon:"success",title:"\u5931\u6557",text:l.isAxiosError?l.response.data.message:l.message})}e.submitting=!1},S=async t=>{try{await g.delete("/products/"+t),await y.fire({icon:"success",title:"\u6210\u529F",text:"\u884C\u7A0B\u522A\u9664\u6210\u529F"}),U()}catch{y.fire({icon:"error",title:"\u884C\u7A0B\u522A\u9664\u5931\u6557",text:"\u884C\u7A0B\u522A\u9664\u5931\u6557"})}},U=async()=>{try{const{data:t}=await g.get("/products/all");n.splice(0,n.length),n.push(...t.result)}catch(t){console.log(t),y.fire({icon:"error",title:"\u5931\u6557",text:t.isAxiosError?t.response.data.message:t.message})}};return console.log(n),U(),(t,l)=>{const w=z("q-card-action");return m(),c(F,{id:"adminItinerary"},{default:d(()=>[s("div",ne,[a(u,{flat:"",fab:"",color:"dark",icon:"mdi-plus",style:{width:"70px",height:"70px","margin-top":"15px","border-radius":"50%"},onClick:l[0]||(l[0]=o=>q(""))}),a(D,{seamless:"",modelValue:e.dialog,"onUpdate:modelValue":l[20]||(l[20]=o=>e.dialog=o),persistent:""},{default:d(()=>[a(b,{id:"dialog"},{default:d(()=>[a(L,null,{default:d(()=>[a(M,{src:j,width:"35px",style:{"margin-top":"-5px"}}),a(G,{class:"text-weight-bold text-primary"},{default:d(()=>[P(v(t.$t("addItinerary")),1)]),_:1}),p(a(u,{flat:"",round:"",dense:"",icon:"close"},null,512),[[f]])]),_:1}),a(de,{modelValue:e.valid,"onUpdate:modelValue":l[19]||(l[19]=o=>e.valid=o),onSubmit:H(E,["prevent"])},{default:d(()=>[a(b,{flat:""},{default:d(()=>[s("div",ie,[s("div",re,[a(r,{rounded:"",flat:"",primary:"",standout:"",modelValue:e.name,"onUpdate:modelValue":l[1]||(l[1]=o=>e.name=o),label:t.$t("itineraryName"),class:"q-ma-md"},null,8,["modelValue","label"])]),s("div",ue,[a(r,{rounded:"",flat:"",primary:"",standout:"",modelValue:e.price,"onUpdate:modelValue":l[2]||(l[2]=o=>e.price=o),label:t.$t("itineraryPrice"),class:"q-ma-md",style:{"box-shadow":"none"}},null,8,["modelValue","label"])])]),s("div",me,[s("div",ce,[a(r,{rounded:"",flat:"",primary:"",standout:"",modelValue:e.startDay,"onUpdate:modelValue":l[3]||(l[3]=o=>e.startDay=o),label:t.$t("startDay"),class:"q-ma-md",style:{"box-shadow":"none"}},null,8,["modelValue","label"])]),s("div",ye,[a(r,{rounded:"",flat:"",primary:"",standout:"",modelValue:e.endDay,"onUpdate:modelValue":l[4]||(l[4]=o=>e.endDay=o),label:t.$t("endDay"),class:"q-ma-md",style:{"box-shadow":"none"}},null,8,["modelValue","label"])])]),s("div",pe,[s("div",fe,[a(r,{rounded:"",flat:"",primary:"",standout:"",modelValue:e.people,"onUpdate:modelValue":l[5]||(l[5]=o=>e.people=o),type:"number",label:t.$t("people"),class:"q-ma-md",style:{"box-shadow":"none"}},null,8,["modelValue","label"])]),s("div",be,[s("div",we,[a(te,{modelValue:e.image,"onUpdate:modelValue":l[6]||(l[6]=o=>e.image=o),rounded:"",standout:"",counter:"",label:t.$t("image")},null,8,["modelValue","label"])])])]),s("div",Ve,[s("div",ge,[a(r,{rounded:"",flat:"",primary:"",standout:"",modelValue:e.dayoneone,"onUpdate:modelValue":l[7]||(l[7]=o=>e.dayoneone=o),label:t.$t("dayoneone"),class:"q-ma-md",style:{"box-shadow":"none"}},null,8,["modelValue","label"])]),s("div",ve,[a(r,{rounded:"",flat:"",primary:"",standout:"",modelValue:e.dayonetwo,"onUpdate:modelValue":l[8]||(l[8]=o=>e.dayonetwo=o),label:t.$t("dayonetwo"),class:"q-ma-md",style:{"box-shadow":"none"}},null,8,["modelValue","label"])]),s("div",he,[a(r,{rounded:"",flat:"",primary:"",standout:"",modelValue:e.dayonethree,"onUpdate:modelValue":l[9]||(l[9]=o=>e.dayonethree=o),label:t.$t("dayonethree"),class:"q-ma-md",style:{"box-shadow":"none"}},null,8,["modelValue","label"])]),s("div",xe,[a(r,{rounded:"",flat:"",primary:"",standout:"",modelValue:e.dayonefour,"onUpdate:modelValue":l[10]||(l[10]=o=>e.dayonefour=o),label:t.$t("dayonefour"),class:"q-ma-md",style:{"box-shadow":"none"}},null,8,["modelValue","label"])]),s("div",_e,[a(r,{rounded:"",flat:"",primary:"",standout:"",modelValue:e.dayonefive,"onUpdate:modelValue":l[11]||(l[11]=o=>e.dayonefive=o),label:t.$t("dayonefive"),class:"q-ma-md",style:{"box-shadow":"none"}},null,8,["modelValue","label"])]),s("div",Qe,[a(r,{rounded:"",flat:"",primary:"",standout:"",modelValue:e.daytwoone,"onUpdate:modelValue":l[12]||(l[12]=o=>e.daytwoone=o),label:t.$t("daytwoone"),class:"q-ma-md",style:{"box-shadow":"none"}},null,8,["modelValue","label"])]),s("div",qe,[a(r,{rounded:"",flat:"",primary:"",standout:"",modelValue:e.daytwotwo,"onUpdate:modelValue":l[13]||(l[13]=o=>e.daytwotwo=o),label:t.$t("daytwotwo"),class:"q-ma-md",style:{"box-shadow":"none"}},null,8,["modelValue","label"])]),s("div",Ue,[a(r,{rounded:"",flat:"",primary:"",standout:"",modelValue:e.daytwothree,"onUpdate:modelValue":l[14]||(l[14]=o=>e.daytwothree=o),label:t.$t("daytwothree"),class:"q-ma-md",style:{"box-shadow":"none"}},null,8,["modelValue","label"])]),s("div",$e,[a(r,{rounded:"",flat:"",primary:"",standout:"",modelValue:e.daytwofour,"onUpdate:modelValue":l[15]||(l[15]=o=>e.daytwofour=o),label:t.$t("daytwofour"),class:"q-ma-md",style:{"box-shadow":"none"}},null,8,["modelValue","label"])]),s("div",De,[a(r,{rounded:"",flat:"",primary:"",standout:"",modelValue:e.daytwofive,"onUpdate:modelValue":l[16]||(l[16]=o=>e.daytwofive=o),label:t.$t("daytwofive"),class:"q-ma-md",style:{"box-shadow":"none"}},null,8,["modelValue","label"])])]),s("div",ke,[s("div",Ce,[a(r,{modelValue:e.description,"onUpdate:modelValue":l[17]||(l[17]=o=>e.description=o),rounded:"",standout:"",autogrow:"",type:"textarea"},null,8,["modelValue"])])]),s("div",Se,[s("div",Ie,[a($,{"false-value":!1,label:`On the Shelf - ${e.sell}`,"true-value":!0,color:"green",modelValue:e.sell,"onUpdate:modelValue":l[18]||(l[18]=o=>e.sell=o)},null,8,["label","modelValue"])])]),a(w,{class:"text-center"},{default:d(()=>[p(a(u,{type:"sumbit",label:t.$t("submit"),color:"primary",loading:e.submitting},null,8,["label","loading"]),[[f]])]),_:1})]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1},8,["modelValue"])]),s("div",Pe,[a(se,{grid:t.$q.screen.lt.md,title:t.$t("itineraryManagement"),rows:n,columns:B,"row-key":"name",filter:x.value,selection:"multiple",selected:C.value,"onUpdate:selected":l[26]||(l[26]=o=>C.value=o)},{"top-right":d(()=>[a(r,{borderless:"",dense:"",debounce:"300",modelValue:x.value,"onUpdate:modelValue":l[21]||(l[21]=o=>x.value=o),placeholder:"Search"},{append:d(()=>[a(O,{name:"search"})]),_:1},8,["modelValue"])]),"header-selection":d(o=>[(m(),c($,{modelValue:o.selected,"onUpdate:modelValue":i=>o.selected=i,key:n.sell},null,8,["modelValue","onUpdate:modelValue"]))]),"body-selection":d(o=>[(m(),c($,{modelValue:o.selected,"onUpdate:modelValue":i=>o.selected=i,key:n.sell},null,8,["modelValue","onUpdate:modelValue"]))]),"body-cell-image":d(o=>[a(A,{style:{"text-align":"right"}},{default:d(()=>[a(h,null,{default:d(()=>[s("img",{src:o.row.image,alt:""},null,8,Te)]),_:2},1024)]),_:2},1024)]),"body-cell-edit":d(o=>[a(A,{style:{"text-align":"right"}},{default:d(()=>[a(u,{round:"",class:"bg-accent",style:{width:"50px",height:"50px"},onClick:i=>q(o.row._id),icon:"mdi-circle-edit-outline"},null,8,["onClick"]),a(u,{round:"",class:"bg-red",style:{width:"50px",height:"50px"},onClick:l[22]||(l[22]=i=>_.value=!0),icon:"mdi-delete"})]),_:2},1024),a(D,{modelValue:_.value,"onUpdate:modelValue":l[23]||(l[23]=i=>_.value=i),persistent:""},{default:d(()=>[a(b,null,{default:d(()=>[a(k,{class:"row items-center"},{default:d(()=>[a(h,{icon:"mdi-delete",color:"primary","text-color":"white"}),s("span",Ae,v(t.$t("Delete"))+" ?",1)]),_:1}),a(N,{align:"right"},{default:d(()=>[p(a(u,{flat:"",color:"primary",icon:"mdi-check-circle",onClick:i=>S(o.row._id)},null,8,["onClick"]),[[f]]),p(a(u,{flat:"",color:"primary",icon:"mdi-close-circle"},null,512),[[f]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),item:d(o=>[s("div",{class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition",style:Y(o.selected?"transform: scale(0.95);":"")},[a(b,{class:Z(o.selected?"bg-grey-2":"")},{default:d(()=>[a(k,null,{default:d(()=>[a(J,{dense:"",modelValue:o.selected,"onUpdate:modelValue":i=>o.selected=i,label:o.row.name},null,8,["modelValue","onUpdate:modelValue","label"])]),_:2},1024),a(K),(m(!0),R(ae,null,W(o.cols,i=>(m(),c(X,{key:i.name},{default:d(()=>[a(T,{class:"text-center"},{default:d(()=>[a(ee,{class:"text-center q-mx-auto"},{default:d(()=>[a(T,null,{default:d(()=>[i.name!=="image"?(m(),c(le,{key:0,caption:"",class:"text-center q-mx-auto"},{default:d(()=>[P(v(i.value),1)]),_:2},1024)):i.name=="image"?(m(),c(h,{key:1,square:"",size:"200px",class:"text-center q-mx-auto"},{default:d(()=>[s("img",{src:o.row[i.name],alt:""},null,8,Ne)]),_:2},1024)):oe("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),a(w,{class:"q-mx-auto text-center"},{default:d(()=>[s("div",Be,[a(u,{rounded:"",class:"text-center bg-red",onClick:l[24]||(l[24]=i=>Q.value=!0),icon:"mdi-delete",style:{width:"50px",height:"50px"}}),a(u,{rounded:"",class:"text-center bg-accent",onClick:i=>q(o.row._id),icon:"mdi-circle-edit-outline",style:{width:"50px",height:"50px"}},null,8,["onClick"])])]),_:2},1024)]),_:2},1032,["class"]),a(D,{modelValue:Q.value,"onUpdate:modelValue":l[25]||(l[25]=i=>Q.value=i),persistent:""},{default:d(()=>[a(b,null,{default:d(()=>[a(k,{class:"row items-center"},{default:d(()=>[a(h,{icon:"mdi-account-arrow-right",color:"primary","text-color":"white"}),s("span",Ee,v(t.$t("Delete"))+" ?",1)]),_:1}),a(N,{align:"right"},{default:d(()=>[p(a(u,{flat:"",color:"primary",icon:"mdi-check-circle",onClick:i=>S(o.row._id)},null,8,["onClick"]),[[f]]),p(a(u,{flat:"",color:"primary",icon:"mdi-close-circle"},null,512),[[f]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])],4)]),_:1},8,["grid","title","rows","filter","selected"])])]),_:1})}}};export{Xe as default};
