import{r as h,aa as x,m as i,p as c,q as r,s as _,ab as b,ac as u,t,v as s,y as k,ae as Q,z as $,Q as p,aA as U}from"./index.2cc57376.js";import{Q as d}from"./QInput.fca396b6.js";import{Q as g}from"./QCard.87904719.js";import{Q as w}from"./QFile.e8e8a3d8.js";import{Q as E}from"./QForm.08959a12.js";const C={class:"row q-mt-none q-mt-lg-xl"},A={class:"row memberCard q-pa-lg"},B={class:"col col-12 text-center"},F=["src"],N={class:"col col-12 col-md-6 q-pa-xs"},P={class:"col col-12 col-md-6 q-pa-xs"},S={class:"col col-12 q-pa-xs"},z={class:"col col-12 col-md-6 q-pa-xs"},I={class:"col col-12 col-md-6 q-pa-xs"},J={class:"col-12"},M={class:"q-my-xxl q-mx-auto text-center q-pa-md"},O={class:"row memberCard q-pa-lg"},j={class:"col col-12 col-md-6 q-pa-xs"},D={class:"col col-12 col-md-6 q-pa-xs"},H={class:"col col-12 q-pa-xs"},G={class:"col col-12 col-md-6 q-pa-xs"},K={class:"col col-12 col-md-6 q-pa-xs"},L={class:"col col-12 q-pa-xs"},R={class:"col-12"},T={class:"q-my-xxl q-mx-auto text-center q-pa-md"},oe={__name:"MemberProfilePage",setup(W){const m=h(!0),v=()=>{m.value?m.value=!1:m.value=!0},a=x({_id:"",image:null,account:"",email:"",name:"",smartphone:"",telephone:""}),n=x({name:"",image:null,smartphone:"",telephone:""}),V=()=>{m.value=!1,n.name=a.name,n.smartphone=a.smartphone,n.telephone=a.telephone,n.image=a.image},f=async()=>{try{const{data:e}=await b.get("/users");a._id=e.result._id,a.account=e.result.account,a.email=e.result.email,a.name=e.result.name,a.image=e.result.image,a.smartphone=e.result.smartphone,a.telephone=e.result.telephone}catch(e){console.log(e),u.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError?e.response.data.message:e.message})}},q=async()=>{try{const e=new FormData;for(const o in n)e.append(o,n[o]),console.log(n[o]);const l={};e.forEach((o,y)=>{l[y]=JSON.stringify(o)}),console.log(JSON.stringify(l)),await b.patch("/users",e),f(),u.fire({icon:"success",title:"\u6210\u529F",text:"\u7DE8\u8F2F\u6210\u529F"}),m.value=!0}catch(e){u.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError?e.response.data.message:e.message})}};return f(),(e,l)=>(i(),c(_,{id:"memberProfile",class:"flex flex-center"},{default:r(()=>[t("div",C,[m.value?(i(),c(g,{key:0,flat:"",bordered:"",class:"q-mx-auto bg-accent"},{default:r(()=>[t("div",A,[t("div",B,[s($,{color:"secondary",class:"text-white"},{default:r(()=>[a.image==0?(i(),c(k,{key:0,name:"fa-solid fa-address-book",size:"xl"})):(i(),Q("img",{key:1,src:a.image,alt:""},null,8,F))]),_:1})]),t("div",N,[s(d,{label:e.$t("account"),readonly:"",modelValue:a.account,"onUpdate:modelValue":l[0]||(l[0]=o=>a.account=o)},null,8,["label","modelValue"])]),t("div",P,[s(d,{label:"Email",readonly:"",modelValue:a.email,"onUpdate:modelValue":l[1]||(l[1]=o=>a.email=o)},null,8,["modelValue"])]),t("div",S,[s(d,{label:e.$t("name"),readonly:"",modelValue:a.name,"onUpdate:modelValue":l[2]||(l[2]=o=>a.name=o)},null,8,["label","modelValue"])]),t("div",z,[s(d,{label:e.$t("smartphone"),readonly:"",modelValue:a.smartphone,"onUpdate:modelValue":l[3]||(l[3]=o=>a.smartphone=o)},null,8,["label","modelValue"])]),t("div",I,[s(d,{label:e.$t("telephone"),readonly:"",modelValue:a.telephone,"onUpdate:modelValue":l[4]||(l[4]=o=>a.telephone=o)},null,8,["label","modelValue"])]),t("div",J,[t("div",M,[s(p,{round:"",icon:"fa-solid fa-pen-nib",class:"q-py-sm q-px-xxl text-subtitle2",unelevated:"",color:"secondary",onClick:l[5]||(l[5]=o=>V())})])])])]),_:1})):(i(),c(g,{key:1,flat:"",bordered:"",class:"q-mx-auto bg-accent"},{default:r(()=>[s(E,{onSubmit:l[13]||(l[13]=U(o=>q(),["prevent"]))},{default:r(()=>[t("div",O,[t("div",j,[s(d,{label:e.$t("account"),readonly:"",modelValue:a.account,"onUpdate:modelValue":l[6]||(l[6]=o=>a.account=o)},null,8,["label","modelValue"])]),t("div",D,[s(d,{label:"Email",readonly:"",modelValue:a.email,"onUpdate:modelValue":l[7]||(l[7]=o=>a.email=o)},null,8,["modelValue"])]),t("div",H,[s(d,{label:e.$t("name"),modelValue:n.name,"onUpdate:modelValue":l[8]||(l[8]=o=>n.name=o)},null,8,["label","modelValue"])]),t("div",G,[s(d,{label:e.$t("smartphone"),modelValue:n.smartphone,"onUpdate:modelValue":l[9]||(l[9]=o=>n.smartphone=o)},null,8,["label","modelValue"])]),t("div",K,[s(d,{label:e.$t("telephone"),modelValue:n.telephone,"onUpdate:modelValue":l[10]||(l[10]=o=>n.telephone=o)},null,8,["label","modelValue"])]),t("div",L,[s(w,{type:"file",accept:"image/*",hint:e.$t("imageHint"),label:e.$t("imageUpload"),modelValue:n.image,"onUpdate:modelValue":l[11]||(l[11]=o=>n.image=o)},null,8,["hint","label","modelValue"])]),t("div",R,[t("div",T,[s(p,{round:"",icon:"fa-solid fa-xmark",class:"q-py-sm q-px-xxl text-subtitle2 q-mx-xs",unelevated:"",color:"secondary",onClick:l[12]||(l[12]=o=>v())}),s(p,{round:"",icon:"fa-solid fa-check",class:"q-py-sm q-px-xxl q-mx-xs text-subtitle2",unelevated:"",color:"secondary",type:"submit"})])])])]),_:1})]),_:1}))])]),_:1}))}};export{oe as default};
