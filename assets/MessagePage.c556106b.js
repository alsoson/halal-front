import{r as B,ab as w,aX as b,m,p,q as a,ac as Q,ad as y,s as n,v as i,t,x as P,B as c,aC as f,Q as h,ae as T,bn as D,aB as E,V as v,ai as x}from"./index.59b4aced.js";import{Q as V}from"./QInput.0bec3f65.js";import{Q as u}from"./QCardSection.caaa60e8.js";import{Q as $}from"./QCardActions.17635811.js";import{Q as N}from"./QForm.69148534.js";import{Q as C}from"./QCard.3166be82.js";import{Q as z}from"./QTable.404fd5f5.js";import{Q as F}from"./QPage.3ae45245.js";import"./QLinearProgress.8748d646.js";import"./use-fullscreen.99cb21b0.js";const I={class:"text-center text-secondary",style:{"font-family":"'ChenYuluoyan-Thin'","font-size":"10vmin"}},M={style:{width:"100%"},class:"bg-accent"},R={class:"text-center q-px-lg q-py-lg",style:{"font-family":"'ChenYuluoyan-Thin'","font-size":"3.5vmin","font-weight":"300"}},X={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},Y={class:"q-ma-none"},O=n("div",{class:"text-subtitle2"},"Answer",-1),j={class:"text-h6"},G={class:"text-subtitle2"},H=n("div",{class:"text-subtitle2"},"Answer",-1),J=c("X"),K=c("Edit"),re={__name:"MessagePage",setup(L){const g=B(!1),d=w([]),s=w({_id:"",reply:"",idx:0,sell:!1,dialog:!1,submitting:!1}),q=e=>{s._id=e,s.reply=d.reply,s.sell=d.sell,s.dialog=!0,s.submitting=!1},k=[{name:"anonymous",required:!0,label:"Anonymous",align:"left",sortable:!0},{name:"title",align:"center",label:"Title",sortable:!0,required:!0},{name:"description",label:"Description",sortable:!0},{name:"reply",label:"Reply",sortable:!0},{name:"edit",label:"Edit",sortable:!0}],U=async()=>{s.submitting=!0,console.log(s.reply);try{await Q.patch("/qa/"+s._id,{reply:s.reply,sell:s.sell}),y.fire({icon:"success",title:"\u6210\u529F",text:"\u7DE8\u8F2F\u6210\u529F"}),_(),s.dialog=!1}catch(e){y.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError?e.response.data.message:e.message})}s.submitting=!1},_=async()=>{try{const{data:e}=await Q.get("/qa/all");d.splice(0,d.length),d.push(...e.result)}catch(e){console.log(e),y.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError?e.response.data.message:e.message})}};return _(),(e,o)=>{const A=b("h7"),S=b("q-card-action");return m(),p(F,{id:"connectUs"},{default:a(()=>[n("h2",I,i(e.$t("connectUsTitle")),1),n("div",M,[n("h6",R,i(e.$t("connectUsP")),1)]),t(z,{grid:"","card-container-class":e.cardContainerClass,rows:d,columns:k,"row-key":"name",filter:e.filter,"hide-header":"",pagination:e.pagination,"onUpdate:pagination":o[5]||(o[5]=l=>e.pagination=l),"rows-per-page-options":e.rowsPerPageOptions},{"top-right":a(()=>[t(V,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":o[0]||(o[0]=l=>e.filter=l),placeholder:"Search"},{append:a(()=>[t(P,{name:"search"})]),_:1},8,["modelValue"])]),item:a(l=>[n("div",X,[(m(),p(C,{key:l.row},{default:a(()=>[t(u,{class:"text-center"},{default:a(()=>[n("h5",Y,[n("strong",null,i(l.row.title),1)]),t(A,null,{default:a(()=>[c(i(l.row.anonymous),1)]),_:2},1024)]),_:2},1024),t(f),t(u,{class:""},{default:a(()=>[c(i(l.row.description),1)]),_:2},1024),t(f,{inset:""}),t(u,null,{default:a(()=>[O,c(" "+i(l.row.reply),1)]),_:2},1024),t(S,null,{default:a(()=>[t(h,{rounded:"",onClick:o[1]||(o[1]=r=>g.value=!0),style:{width:"50px",height:"50px"},class:"bg-accent",icon:"mdi-circle-edit-outline"}),t(T,{modelValue:g.value,"onUpdate:modelValue":o[4]||(o[4]=r=>g.value=r),persistent:"",style:{width:"100%"}},{default:a(()=>[t(C,{flat:"",bordered:"",style:{width:"100%"},class:"my-card bg-secondary text-white"},{default:a(()=>[t(N,{modelValue:s,"onUpdate:modelValue":o[3]||(o[3]=r=>D(s)?s.value=r:null),onSubmit:E(U,["prevent"])},{default:a(()=>[t(u,null,{default:a(()=>[n("div",j,i(l.row.title),1),n("div",G,i(l.row.anonymous),1)]),_:2},1024),t(u,null,{default:a(()=>[c(i(l.row.description),1)]),_:2},1024),t(f,{inset:""}),t(u,null,{default:a(()=>[H,t(V,{modelValue:s.reply,"onUpdate:modelValue":o[2]||(o[2]=r=>s.reply=r),type:"textarea",color:"white"},null,8,["modelValue"])]),_:1}),t(f,{dark:""}),t($,null,{default:a(()=>[v((m(),p(h,{flat:""},{default:a(()=>[J]),_:1})),[[x]]),v((m(),p(h,{flat:"",type:"submit",onClick:r=>q(l.row._id)},{default:a(()=>[K]),_:2},1032,["onClick"])),[[x]])]),_:2},1024)]),_:2},1032,["modelValue","onSubmit"])]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1024)]),_:2},1024))])]),_:1},8,["card-container-class","rows","filter","pagination","rows-per-page-options"])]),_:1})}}};export{re as default};
