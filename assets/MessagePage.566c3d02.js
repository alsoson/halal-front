import{a9 as b,m as c,p as m,q as a,s as C,aa as h,ab as y,b1 as x,t as n,v as t,y as S,A as p,x as r,aH as f,Q as w,bp as A,aG as P,V as U,bA as D,aZ as B,af as M}from"./index.666c0e82.js";import{Q as u}from"./QCardSection.7f004652.js";import{Q as N}from"./QInput.16cac50a.js";import{Q as T}from"./QCardActions.88151ac8.js";import{Q as I}from"./QForm.7348ccdb.js";import{Q}from"./QCard.e99b36e6.js";import{Q as R}from"./QDialog.bcff6732.js";import{Q as $}from"./QTable.f1ef5419.js";import"./rtl.4b414a6d.js";import"./QChip.c43db65c.js";import"./use-fullscreen.51146727.js";const E={class:"box"},F={class:"row text-center"},O={class:"text-center q-mx-auto q-my-md q-mt-lg text-secondary",style:{padding:"0"}},z={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},G={class:"q-ma-none"},H=n("div",{class:"text-subtitle2"},"Answer",-1),Z={class:"text-h6"},j={class:"text-subtitle2"},J=n("div",{class:"text-subtitle2"},"Answer",-1),ne={__name:"MessagePage",setup(K){const d=b([]),e=b({_id:"",reply:"",idx:0,sell:!1,dialog:!1,submitting:!1}),v=l=>{const o=d.findIndex(g=>g._id===l);e._id=l,e.reply=d[o].reply,e.sell=d[o].sell,e.dialog=!0,e.submitting=!1},V=[{name:"anonymous",required:!0,label:"Anonymous",align:"left",flied:l=>l.row.anonymous,sortable:!0},{name:"title",align:"center",label:"Title",sortable:!0,required:!0},{name:"description",label:"Description",sortable:!0},{name:"reply",label:"Reply",sortable:!0},{name:"edit",label:"Edit",sortable:!0}],q=async()=>{e.submitting=!0,console.log(e.reply);try{await h.patch("/qa/"+e._id,{reply:e.reply,sell:e.sell}),y.fire({icon:"success",title:"Edit Message Success"}),_(),e.dialog=!1}catch{y.fire({icon:"question",title:"Please edit again"})}e.submitting=!1},_=async()=>{try{const{data:l}=await h.get("/qa/all");d.splice(0,d.length),d.push(...l.result)}catch(l){console.log(l),y.fire({icon:"question",title:"Please try it again"})}};return _(),(l,o)=>{const g=x("h7"),k=x("q-card-action");return c(),m(C,{id:"connectUs"},{default:a(()=>[n("div",E,[n("div",F,[n("h5",O,[t(S,{name:"mdi-forum",size:"100px",color:"secondary",class:"q-mx-auto"}),p(" "+r(l.$t("messageManagement")),1)])])]),t($,{grid:"","card-container-class":l.cardContainerClass,rows:d,columns:V,"row-key":"name",filter:l.filter,"hide-header":"",pagination:l.pagination,"onUpdate:pagination":o[4]||(o[4]=s=>l.pagination=s),"rows-per-page-options":l.rowsPerPageOptions},{item:a(s=>[n("div",z,[(c(),m(Q,{key:s.row},{default:a(()=>[t(u,{class:"text-center"},{default:a(()=>[n("h5",G,[n("strong",null,r(s.row.title),1)]),t(g,null,{default:a(()=>[p(r(s.row.anonymous),1)]),_:2},1024)]),_:2},1024),t(f),t(u,{class:"",style:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},{default:a(()=>[p(r(s.row.description),1)]),_:2},1024),t(f,{inset:""}),t(u,{style:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},{default:a(()=>[H,p(" "+r(s.row.reply),1)]),_:2},1024),t(k,null,{default:a(()=>[(c(),m(w,{rounded:"",onClick:i=>v(s.row._id),key:s.row._id,style:{width:"50px",height:"50px"},class:"bg-accent",icon:"mdi-circle-edit-outline"},null,8,["onClick"])),(c(),m(R,{key:s.row._id,modelValue:e.dialog,"onUpdate:modelValue":o[3]||(o[3]=i=>e.dialog=i),persistent:"",style:{width:"100%"}},{default:a(()=>[t(Q,{flat:"",bordered:"",style:{width:"100%"},class:"my-card bg-secondary text-white"},{default:a(()=>[t(I,{modelValue:e,"onUpdate:modelValue":o[2]||(o[2]=i=>A(e)?e.value=i:null),onSubmit:P(q,["prevent"])},{default:a(()=>[t(u,null,{default:a(()=>[n("div",Z,r(s.row.title),1),n("div",j,r(s.row.anonymous),1)]),_:2},1024),t(u,null,{default:a(()=>[p(r(s.row.description),1)]),_:2},1024),t(f,{inset:""}),t(u,null,{default:a(()=>[J,t(N,{modelValue:e.reply,"onUpdate:modelValue":o[0]||(o[0]=i=>e.reply=i),rules:[i=>!!i||"Required"],type:"textarea",color:"white"},null,8,["modelValue","rules"])]),_:1}),t(f,{dark:""}),t(T,null,{default:a(()=>[U(t(w,{round:"",flat:"",icon:"fa-solid fa-xmark"},null,512),[[M]]),t(w,{flat:"",round:"",type:"submit",icon:"fa-solid fa-check"}),e.reply?(c(),m(D,{key:0,"false-value":!1,label:`On the Shelf - ${e.sell}`,"true-value":!0,color:"pink",modelValue:e.sell,"onUpdate:modelValue":o[1]||(o[1]=i=>e.sell=i)},null,8,["label","modelValue"])):B("",!0)]),_:1})]),_:2},1032,["modelValue","onSubmit"])]),_:2},1024)]),_:2},1032,["modelValue"]))]),_:2},1024)]),_:2},1024))])]),_:1},8,["card-container-class","rows","filter","pagination","rows-per-page-options"])]),_:1})}}};export{ne as default};
